# Example Prometheus config for scraping CITE API /metrics.
# When METRICS_SECRET is set in .env, the API requires X-Metrics-Secret or Bearer token.
# Copy to prometheus.yml and set bearer_token to the same value as METRICS_SECRET.

global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'cite-api'
    metrics_path: /metrics
    static_configs:
      - targets: ['api:3000']   # or your API host:port (e.g. cite-api:3000)
    # Use the same value as METRICS_SECRET in infra/docker/.env
    bearer_token: 'YOUR_METRICS_SECRET'
    # Or use a file (e.g. Docker secret): bearer_token_file: /run/secrets/prometheus_metrics_secret
